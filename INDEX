<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Procurement Navigator</title>

    <!-- React 17 (required for Babel + GitHub Pages) -->
    <script crossorigin src="https://unpkg.com/react@17/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.production.min.js"></script>

    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;700&family=Inter:wght@400;500&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; }
        h1, h2, h3, .font-bold { font-family: 'Montserrat', sans-serif; }
    </style>
</head>
<body>
<div id="root"></div>

<script type="text/babel">
const { useState } = React;

const AWARDED_VENDOR_DASHBOARD_URL = "https://app.smartsheet.com/dashboards/RH8R7RHrjX8VwMGMVRwWVm2vQ6cXhvrFmCRrh6W1";
const QUOTE_VERIFICATION_FORM_URL = "https://esc13.sharepoint.com/:b:/s/ProcurementTeam/IQC15mhNu5p2SJ2NL_NjcLd-AT4YsRUrKrkaDqFf09rKVCE?e=lMpuUx";
const TGC_2254_URL = "https://statutes.capitol.texas.gov/Docs/GV/htm/GV.2254.htm";
const BID_NBR_FORMAT_URL = "https://app.smartsheet.com/b/publish?EQBCT=cbbc1eb4b0ac40e68b5af76ee6a38847";

const ProcurementTool = () => {
    const [step, setStep] = useState(1);
    const [amount, setAmount] = useState('');
    const [funding, setFunding] = useState('');
    const [category, setCategory] = useState('');
    const [vendor, setVendor] = useState('');

    const amountRanges = [
        { value: '0-49999', label: '$0 - $49,999.99' },
        { value: '50000-99999', label: '$50,000 - $99,999.99' },
        { value: '100000-349999', label: '$100,000 - $349,999.99' },
        { value: '350000+', label: '$350,000 - $9,999,999' }
    ];

    const fundingSources = [
        { value: 'federal', label: 'Federal' },
        { value: 'state', label: 'State' },
        { value: 'local', label: 'Local' }
    ];

    const categories = [
        { value: 'goods', label: 'Goods/Services' },
        { value: 'professional', label: 'Professional Services (TGC 2254)' },
        { value: 'construction', label: 'Construction' }
    ];

    const vendors = [
        { value: 'no', label: 'No' },
        { value: 'esc13', label: 'Yes - ESC Region 13' },
        { value: 'coop', label: 'Yes - Cooperative' }
    ];

    const determineResult = () => {
        const isFederal = funding === 'federal';

        if (category === 'professional') {
            return {
                authority: 'TGC 2254' + (isFederal ? ' and 2 CFR 200' : ''),
                method: 'Qualification-Based Selection (QBS)',
                action: 'Conduct a qualification-based selection process\nâ€¢ Contact Procurement for assistance'
            };
        }

        if (amount === '100000-349999' || amount === '350000+') {
            return {
                authority: isFederal ? '2 CFR 200 and TEC 44.031' : 'TEC 44.031',
                method: 'Formal Solicitation',
                action: 'Conduct a formal solicitation\nâ€¢ Contact Procurement for assistance'
            };
        }

        if (amount === '50000-99999') {
            return {
                authority: '2 CFR 200',
                method: 'Small Purchase',
                action: 'Obtain at least three quotes'
            };
        }

        return {
            authority: '2 CFR 200',
            method: 'Micro-Purchase',
            action: 'Obtain a quote'
        };
    };

    const result = step === 5 ? determineResult() : null;

    return (
        <div className="min-h-screen p-6 bg-slate-100">
            <div className="max-w-3xl mx-auto bg-white rounded-lg shadow p-8">
                <h1 className="text-3xl font-bold mb-2">Procurement Compliance Navigator ðŸ§­</h1>

                {step === 1 && amountRanges.map(r => (
                    <button key={r.value} className="block w-full p-4 mb-3 border rounded"
                        onClick={() => { setAmount(r.value); setStep(2); }}>
                        {r.label}
                    </button>
                ))}

                {step === 2 && fundingSources.map(f => (
                    <button key={f.value} className="block w-full p-4 mb-3 border rounded"
                        onClick={() => { setFunding(f.value); setStep(3); }}>
                        {f.label}
                    </button>
                ))}

                {step === 3 && categories.map(c => (
                    <button key={c.value} className="block w-full p-4 mb-3 border rounded"
                        onClick={() => { setCategory(c.value); setStep(4); }}>
                        {c.label}
                    </button>
                ))}

                {step === 4 && vendors.map(v => (
                    <button key={v.value} className="block w-full p-4 mb-3 border rounded"
                        onClick={() => { setVendor(v.value); setStep(5); }}>
                        {v.label}
                    </button>
                ))}

                {step === 5 && result && (
                    <div className="mt-6 bg-teal-50 border border-teal-300 rounded p-6">
                        <p className="whitespace-pre-line text-teal-700 mb-4">{result.action}</p>
                        <p><strong>Procurement Method:</strong> {result.method}</p>
                        <p><strong>Authority:</strong> {result.authority}</p>
                    </div>
                )}
            </div>
        </div>
    );
};

ReactDOM.render(<ProcurementTool />, document.getElementById('root'));
</script>
</body>
</html>
